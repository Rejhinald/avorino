<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ADU Construction Process & Cost | Avorino Orange County</title>
<meta name="description" content="ADU construction in Orange County from $250K. Design, permits, and build in 10–14 months. Detached, attached, garage conversion, and above-garage ADUs by Avorino.">
<meta name="robots" content="index, follow">
<link rel="canonical" href="https://www.avorino.com/adu-construction">

<!-- Open Graph -->
<meta property="og:type" content="website">
<meta property="og:site_name" content="Avorino">
<meta property="og:title" content="ADU Construction Process & Cost | Avorino Orange County">
<meta property="og:description" content="ADU construction in Orange County from $250K. Design, permits, and build in 10–14 months. Detached, attached, garage conversion, and above-garage ADUs by Avorino.">
<meta property="og:url" content="https://www.avorino.com/adu-construction">

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="ADU Construction Process & Cost | Avorino Orange County">
<meta name="twitter:description" content="ADU construction in Orange County from $250K. Design, permits, and build in 10–14 months.">
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600&family=DM+Serif+Display&display=swap" rel="stylesheet">
<style>
  /* ─── Reset ─── */
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  html, body { overflow-x: hidden; font-family: 'DM Sans', sans-serif; background: #f0ede8; color: #111; }
  html { scroll-behavior: auto; }

  /* ─── Avorino Design Tokens ─── */
  :root {
    --av-dark: #111111;
    --av-cream: #f0ede8;
    --av-warm: #e8e4df;
    --av-red: #c8222a;
    --av-gold: #c9a96e;
    --av-radius: 8px;
    --av-section-pad-y: 128px;
    --av-section-pad-x: 80px;
    --av-text-xl: clamp(48px, 5vw, 96px);
    --av-text-lg: clamp(36px, 3.5vw, 64px);
    --av-text-h3: clamp(24px, 2vw, 36px);
    --av-text-body: clamp(16px, 1.1vw, 18px);
    --av-text-sm: clamp(14px, 0.9vw, 16px);
    --av-text-xs: clamp(11px, 0.7vw, 13px);
  }

  /* ─── Shared Section Styles ─── */
  .av-section { padding: var(--av-section-pad-y) var(--av-section-pad-x); }
  .av-section-warm { background: var(--av-warm); color: var(--av-dark); }
  .av-section-dark { background: var(--av-dark); color: var(--av-cream); }

  /* ─── Typography ─── */
  .av-heading-xl {
    font-family: 'DM Serif Display', serif;
    font-size: var(--av-text-xl); line-height: 1.05; font-weight: 400; letter-spacing: -0.02em;
  }
  .av-heading-lg {
    font-family: 'DM Serif Display', serif;
    font-size: var(--av-text-lg); line-height: 1.1; font-weight: 400;
  }
  .av-heading-md {
    font-family: 'DM Serif Display', serif;
    font-size: var(--av-text-h3); line-height: 1.15; font-weight: 400;
  }
  .av-body { font-size: var(--av-text-body); line-height: 1.9; }

  /* ─── Label ─── */
  .av-label {
    display: flex; align-items: center; gap: 16px;
    font-family: 'DM Sans', sans-serif; font-size: var(--av-text-xs);
    letter-spacing: 0.25em; text-transform: uppercase; opacity: 0.4;
  }
  .av-label-line { flex-grow: 1; height: 1px; background: rgba(17,17,17,0.15); transform-origin: left center; }

  /* ─── Utility ─── */
  .av-mb-48 { margin-bottom: 48px; }
  .av-mb-64 { margin-bottom: 64px; }
  .av-mb-96 { margin-bottom: 96px; }

  /* ─── Animation supports ─── */
  [data-animate="char-cascade"] span { display: inline-block; will-change: transform, opacity, filter; }
  [data-animate="line-wipe"] .line { will-change: clip-path; }

  /* ═══════════════════════════════════════════════
     SECTION 1: HERO — Full-viewport cinematic
     ═══════════════════════════════════════════════ */
  .aduc-hero {
    min-height: 80vh;
    display: flex; align-items: flex-end;
    padding: 160px var(--av-section-pad-x) var(--av-section-pad-y);
    background-color: var(--av-dark); color: var(--av-cream);
    position: relative; overflow: hidden;
  }
  .aduc-hero-canvas-wrap {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    z-index: 1; pointer-events: none; overflow: hidden;
  }
  .aduc-hero-canvas-wrap canvas { display: block; width: 100%; height: 100%; }
  .aduc-hero-content { position: relative; z-index: 2; max-width: 800px; }
  .aduc-hero-label {
    font-family: 'DM Sans', sans-serif; font-size: var(--av-text-xs);
    letter-spacing: 0.3em; text-transform: uppercase; opacity: 0;
    margin-bottom: 32px; color: var(--av-cream);
  }
  .aduc-hero-gold-line {
    width: 0; height: 1px; background: var(--av-gold);
    margin-bottom: 24px; will-change: width;
  }
  .aduc-hero-subtitle {
    font-family: 'DM Sans', sans-serif; font-size: var(--av-text-body);
    line-height: 1.9; opacity: 0; margin-top: 24px; color: var(--av-cream);
    max-width: 520px; filter: blur(4px);
  }
  .aduc-hero-scroll-hint {
    position: absolute; bottom: 40px; left: 50%; transform: translateX(-50%);
    z-index: 3; display: flex; flex-direction: column; align-items: center; gap: 8px;
    opacity: 0;
  }
  .aduc-hero-scroll-hint span {
    font-family: 'DM Sans', sans-serif; font-size: 10px;
    letter-spacing: 0.3em; text-transform: uppercase; color: var(--av-cream);
  }
  .aduc-hero-scroll-line {
    width: 1px; height: 40px; background: var(--av-gold);
    transform-origin: top center; animation: scrollPulse 2s ease-in-out infinite;
  }
  @keyframes scrollPulse {
    0%, 100% { transform: scaleY(0.3); opacity: 0.3; }
    50% { transform: scaleY(1); opacity: 0.8; }
  }

  /* ═══════════════════════════════════════════════
     SECTION 2: ADU TYPES — Three.js backdrop + scroll-locked cards
     ═══════════════════════════════════════════════ */
  .aduc-types { position: relative; overflow: hidden; background: #ffffff; }
  .aduc-types-canvas-wrap {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    z-index: 1; pointer-events: none; overflow: hidden;
  }
  .aduc-types-canvas-wrap canvas { display: block; width: 100%; height: 100%; }
  .aduc-types-content { position: relative; z-index: 2; }
  .aduc-types-pinned {
    height: 100vh; display: flex; align-items: center;
    position: relative; padding: 0 var(--av-section-pad-x);
  }
  .aduc-types-header {
    position: absolute; top: 48px; left: var(--av-section-pad-x); right: var(--av-section-pad-x);
  }
  .aduc-types-info {
    margin-left: auto;
    position: relative; width: 480px; max-width: 100%; min-height: 300px;
  }
  .aduc-type-card {
    background: #ffffff; color: var(--av-dark);
    border-radius: var(--av-radius); padding: 56px 48px;
    border-top: 2px solid rgba(201,169,110,0.3);
    backdrop-filter: none; -webkit-backdrop-filter: none;
    position: absolute; top: 50%; transform: translateY(-50%); width: 100%;
    opacity: 0;
    box-shadow: 0 4px 32px rgba(0,0,0,0.06);
    will-change: transform, opacity;
  }
  .aduc-type-card:first-child { opacity: 1; }
  .aduc-type-card-num {
    font-family: 'DM Sans', sans-serif; font-size: var(--av-text-xs);
    letter-spacing: 0.2em; text-transform: uppercase; color: var(--av-gold);
    margin-bottom: 16px;
  }
  .aduc-type-card-title {
    font-family: 'DM Serif Display', serif; font-size: 28px;
    line-height: 1.2; font-weight: 400; margin-bottom: 14px; color: var(--av-dark);
  }
  .aduc-type-card-desc {
    font-family: 'DM Sans', sans-serif; font-size: var(--av-text-sm);
    line-height: 1.7; opacity: 0.55; color: var(--av-dark);
  }
  .aduc-types-progress {
    position: absolute; bottom: 40px; left: 50%; transform: translateX(-50%);
    z-index: 3; display: flex; align-items: center; gap: 32px;
  }
  .aduc-types-track {
    width: 200px; height: 2px; background: rgba(17,17,17,0.08); position: relative;
  }
  .aduc-types-fill { height: 100%; background: var(--av-red); width: 0%; transition: width 0.4s ease; }
  .aduc-types-dots { display: flex; gap: 24px; }
  .aduc-tdot {
    font-family: 'DM Sans', sans-serif; font-size: 12px; font-weight: 500;
    opacity: 0.3; transition: all 0.3s ease; color: var(--av-dark);
  }
  .aduc-tdot.active { opacity: 1; color: var(--av-red); font-weight: 700; }

  /* ═══════════════════════════════════════════════
     SECTION 3: ROI / COST — Warm section with stat cards
     ═══════════════════════════════════════════════ */
  .aduc-roi { position: relative; }
  .aduc-roi-header { text-align: center; margin-bottom: 80px; }
  .aduc-roi-grid {
    display: grid; grid-template-columns: repeat(4, 1fr); gap: 24px;
    max-width: 1000px; margin: 0 auto;
  }
  .aduc-roi-card {
    background: var(--av-dark); color: var(--av-cream);
    border-radius: var(--av-radius); padding: 40px 24px;
    text-align: center; opacity: 0; transform: translateY(40px);
  }
  .aduc-roi-value {
    font-family: 'DM Serif Display', serif; font-size: clamp(28px, 3.5vw, 42px);
    font-weight: 400; color: var(--av-gold); margin-bottom: 12px; line-height: 1.1;
  }
  .aduc-roi-label {
    font-family: 'DM Sans', sans-serif; font-size: 12px;
    text-transform: uppercase; letter-spacing: 0.15em; opacity: 0.4;
  }

  /* ═══════════════════════════════════════════════
     SECTION 4: PROCESS — Horizontal Timeline
     ═══════════════════════════════════════════════ */
  .aduc-process { position: relative; }
  .aduc-process-header { text-align: center; margin-bottom: 80px; }
  .aduc-htl-wrap {
    position: relative; max-width: 900px; margin: 0 auto;
    padding-top: 60px;
  }
  .aduc-htl-track-wrap {
    position: absolute; top: 18px; left: 0; right: 0; height: 4px;
  }
  .aduc-htl-track-bg {
    width: 100%; height: 100%; background: rgba(17,17,17,0.08); border-radius: 2px;
  }
  .aduc-htl-track-fill {
    position: absolute; top: 0; left: 0; height: 100%; width: 0%;
    background: var(--av-red); border-radius: 2px;
  }
  .aduc-htl-steps {
    display: grid; grid-template-columns: repeat(3, 1fr); gap: 48px;
  }
  .aduc-htl-step { text-align: center; position: relative; }
  .aduc-htl-node {
    width: 20px; height: 20px; border-radius: 50%;
    border: 2px solid rgba(17,17,17,0.15); background: var(--av-warm);
    position: absolute; top: -51px; left: 50%; transform: translateX(-50%);
    transition: all 0.5s ease; z-index: 2;
  }
  .aduc-htl-node.active {
    background: var(--av-red); border-color: var(--av-red);
    box-shadow: 0 0 0 6px rgba(200,34,42,0.15);
  }
  .aduc-htl-number {
    font-family: 'DM Serif Display', serif; font-size: 64px; line-height: 1;
    opacity: 0.15; display: block; margin-bottom: 4px;
  }
  .aduc-htl-title {
    font-family: 'DM Serif Display', serif; font-size: 28px; line-height: 1.2;
    margin-bottom: 8px;
  }
  .aduc-htl-title .word {
    display: inline-block; opacity: 0; transform: translateY(105%);
  }
  .aduc-htl-time {
    font-size: 14px; color: var(--av-red); display: block; margin-bottom: 12px; opacity: 0;
  }
  .aduc-htl-desc {
    font-size: var(--av-text-sm); line-height: 1.7; opacity: 0; max-width: 280px; margin: 0 auto;
    filter: blur(6px); transform: translateY(20px);
  }
  .aduc-htl-note {
    text-align: center; margin-top: 48px; font-size: 14px; opacity: 0.4;
  }

  /* ═══════════════════════════════════════════════
     SECTION 5: CTA
     ═══════════════════════════════════════════════ */
  .av-cta { padding: 48px; }
  .aduc-cta-container {
    background: var(--av-dark); border-radius: var(--av-radius); min-height: 56vh;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    text-align: center; position: relative; overflow: hidden;
  }
  .av-cta-bg {
    position: absolute; top: 0; left: 0; right: 0; bottom: 0; opacity: 0.2;
    background: radial-gradient(ellipse at 30% 50%, rgba(201,169,110,0.08) 0%, transparent 60%),
                radial-gradient(ellipse at 70% 50%, rgba(200,34,42,0.05) 0%, transparent 60%);
  }
  .av-cta-content { position: relative; z-index: 2; padding: 64px; }
  .av-cta-subtitle {
    font-family: 'DM Sans', sans-serif; font-size: 12px; letter-spacing: 0.3em;
    text-transform: uppercase; opacity: 0.4; margin-bottom: 32px; color: var(--av-cream);
  }
  .av-cta-heading {
    font-family: 'DM Serif Display', serif; font-size: var(--av-text-lg);
    line-height: 1.08; letter-spacing: -0.02em; font-weight: 400;
    color: var(--av-cream); margin-bottom: 48px; max-width: 12em;
    margin-left: auto; margin-right: auto;
  }
  .av-cta-btns { display: flex; gap: 16px; justify-content: center; }
  .av-cta-btn {
    display: inline-flex; align-items: center; gap: 12px; padding: 18px 40px;
    border-radius: 100px; font-family: 'DM Sans', sans-serif;
    font-size: var(--av-text-sm); font-weight: 500; letter-spacing: 0.04em;
    text-decoration: none; cursor: pointer; border: none;
    transition: transform 0.5s cubic-bezier(0.23,1,0.32,1), box-shadow 0.3s ease;
  }
  .av-cta-btn:hover { transform: translateY(-2px); }
  .av-cta-btn-primary { background: var(--av-red); color: var(--av-cream); }
  .av-cta-btn-primary:hover { box-shadow: 0 8px 32px rgba(200,34,42,0.25); }
  .av-cta-btn-ghost {
    background: rgba(240,237,232,0.08); color: var(--av-cream);
    border: 1px solid rgba(240,237,232,0.2);
  }
  .av-cta-btn-ghost:hover { box-shadow: 0 8px 32px rgba(0,0,0,0.2); }

  /* ═══════════════════════════════════════════════
     RESPONSIVE
     ═══════════════════════════════════════════════ */
  @media (max-width: 991px) {
    .av-section { padding: 80px 40px !important; }
    .aduc-hero { min-height: 60vh !important; padding: 120px 40px 80px !important; }
    .aduc-hero-canvas-wrap { display: none !important; }
    .aduc-types-canvas-wrap { display: none !important; }
    .aduc-types-pinned { padding: 0 40px !important; }
    .aduc-types-info { width: 100% !important; margin-left: 0 !important; }
    .aduc-type-card { position: relative !important; top: auto !important; transform: none !important; opacity: 1 !important; margin-bottom: 24px; }
    .aduc-roi-grid { grid-template-columns: 1fr 1fr !important; }
    .aduc-process-header { margin-bottom: 48px !important; }
    .aduc-htl-steps { grid-template-columns: 1fr !important; gap: 64px !important; }
    .aduc-htl-track-wrap { display: none !important; }
    .aduc-htl-node { position: relative !important; top: auto !important; left: auto !important; transform: none !important; margin: 0 auto 16px !important; }
    .av-cta { padding: 40px !important; }
  }
  @media (max-width: 767px) {
    .av-section { padding: 64px 24px !important; }
    .aduc-hero { min-height: 50vh !important; padding: 100px 24px 64px !important; }
    .aduc-types-pinned { padding: 0 24px !important; }
    .aduc-roi-grid { grid-template-columns: 1fr !important; max-width: 320px !important; }
    .av-heading-xl { font-size: clamp(36px, 8vw, 56px) !important; }
    .av-heading-lg { font-size: clamp(28px, 6vw, 40px) !important; }
    .av-cta { padding: 24px !important; }
    .av-cta-btns { flex-direction: column !important; align-items: center !important; }
  }
  @media (max-width: 478px) {
    .av-section { padding: 48px 16px !important; }
    .aduc-hero { min-height: 45vh !important; padding: 80px 16px 48px !important; }
    .av-heading-xl { font-size: clamp(28px, 9vw, 42px) !important; }
    .av-heading-lg { font-size: clamp(24px, 6vw, 32px) !important; }
    .av-cta { padding: 16px !important; }
    .av-cta-btn { width: 100% !important; justify-content: center !important; }
    .aduc-type-card { padding: 36px 24px !important; }
    .aduc-roi-card { padding: 32px 16px !important; }
  }
</style>

<!-- Structured Data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Service",
  "name": "ADU Construction",
  "provider": {
    "@type": "LocalBusiness",
    "name": "Avorino",
    "url": "https://www.avorino.com",
    "areaServed": {
      "@type": "State",
      "name": "California"
    }
  },
  "description": "Full-service ADU construction including design, permitting, and building in Orange County, CA. Average project cost $250K–$400K with 10–14 month timeline.",
  "serviceType": "ADU Construction",
  "areaServed": "Orange County, CA"
}
</script>
</head>
<body>

<main>
<!-- ═══════════ SECTION 1: HERO ═══════════ -->
<section class="aduc-hero" id="aduc-hero">
  <div class="aduc-hero-canvas-wrap" id="hero-canvas"></div>
  <div class="aduc-hero-content">
    <div class="aduc-hero-label" data-animate="fade-up">// ADU Construction</div>
    <h1 class="av-heading-xl" data-animate="char-cascade">ADU Construction</h1>
    <div class="aduc-hero-gold-line"></div>
    <p class="aduc-hero-subtitle" data-animate="fade-up">An accessory dwelling unit is an independent residential unit on the same lot as your home. Detached, attached, or converted — Avorino designs, permits, and builds it all.</p>
  </div>
  <div class="aduc-hero-scroll-hint" data-animate="fade-up">
    <span>Scroll</span>
    <div class="aduc-hero-scroll-line"></div>
  </div>
</section>

<!-- ═══════════ SECTION 2: ADU TYPES — Scroll-locked + Three.js ═══════════ -->
<section class="aduc-types" id="aduc-types">
  <div class="aduc-types-canvas-wrap" id="types-canvas"></div>
  <div class="aduc-types-content">
    <div class="aduc-types-pinned" data-types-pinned>
      <div class="aduc-types-header">
        <div class="av-label av-mb-48">
          <div>ADU Types</div>
          <div class="av-label-line"></div>
        </div>
      </div>
      <div class="aduc-types-info">
        <div class="aduc-type-card" data-step="0">
          <div class="aduc-type-card-num">01 / 04</div>
          <h3 class="aduc-type-card-title">Detached ADU</h3>
          <p class="aduc-type-card-desc">Standalone unit in your backyard — maximum privacy and design flexibility. Popular for rental income or multigenerational living.</p>
        </div>
        <div class="aduc-type-card" data-step="1">
          <div class="aduc-type-card-num">02 / 04</div>
          <h3 class="aduc-type-card-title">Attached ADU</h3>
          <p class="aduc-type-card-desc">Extension connected to your home with its own private entrance. Shares a wall for cost savings while maintaining complete independence.</p>
        </div>
        <div class="aduc-type-card" data-step="2">
          <div class="aduc-type-card-num">03 / 04</div>
          <h3 class="aduc-type-card-title">Garage Conversion</h3>
          <p class="aduc-type-card-desc">Convert your existing garage into a fully permitted living space. The most affordable option — starting at $75K with the fastest turnaround.</p>
        </div>
        <div class="aduc-type-card" data-step="3">
          <div class="aduc-type-card-num">04 / 04</div>
          <h3 class="aduc-type-card-title">Above-Garage ADU</h3>
          <p class="aduc-type-card-desc">Second story above your garage. Keeps parking, adds living space, and maximizes your lot without sacrificing yard area.</p>
        </div>
      </div>
      <div class="aduc-types-progress">
        <div class="aduc-types-track"><div class="aduc-types-fill"></div></div>
        <div class="aduc-types-dots">
          <span class="aduc-tdot active">01</span>
          <span class="aduc-tdot">02</span>
          <span class="aduc-tdot">03</span>
          <span class="aduc-tdot">04</span>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- ═══════════ SECTION 3: ROI / COST ═══════════ -->
<section class="av-section av-section-warm aduc-roi" id="aduc-roi">
  <div class="aduc-roi-header">
    <div class="av-label av-mb-64" data-animate="fade-up">
      <div>The Numbers</div>
      <div class="av-label-line"></div>
    </div>
    <h2 class="av-heading-lg" data-animate="line-wipe">The numbers<br>make sense</h2>
  </div>
  <div class="aduc-roi-grid">
    <div class="aduc-roi-card" data-stat="0">
      <div class="aduc-roi-value" data-count="$250K–$400K">$250K–$400K</div>
      <div class="aduc-roi-label">Avg. project cost</div>
    </div>
    <div class="aduc-roi-card" data-stat="1">
      <div class="aduc-roi-value" data-count="$2K–$4.5K+">$2K–$4.5K+</div>
      <div class="aduc-roi-label">Monthly rental</div>
    </div>
    <div class="aduc-roi-card" data-stat="2">
      <div class="aduc-roi-value" data-count="5–12%">5–12%</div>
      <div class="aduc-roi-label">Annual ROI</div>
    </div>
    <div class="aduc-roi-card" data-stat="3">
      <div class="aduc-roi-value" data-count="8–15 yrs">8–15 yrs</div>
      <div class="aduc-roi-label">Break-even</div>
    </div>
  </div>
</section>

<!-- ═══════════ SECTION 4: PROCESS — Horizontal Timeline ═══════════ -->
<section class="av-section av-section-warm aduc-process" id="aduc-process">
  <div class="aduc-process-header">
    <div class="av-label av-mb-64" data-animate="fade-up">
      <div>Our Process</div>
      <div class="av-label-line"></div>
    </div>
    <h2 class="av-heading-lg" data-animate="line-wipe">Three steps to<br>your ADU</h2>
  </div>
  <div class="aduc-htl-wrap" id="aduc-htl-wrap">
    <div class="aduc-htl-track-wrap">
      <div class="aduc-htl-track-bg"></div>
      <div class="aduc-htl-track-fill" id="aduc-htl-fill"></div>
    </div>
    <div class="aduc-htl-steps">
      <div class="aduc-htl-step" data-step="0">
        <div class="aduc-htl-node"></div>
        <span class="aduc-htl-number">01</span>
        <h3 class="aduc-htl-title"><span class="word">Design</span></h3>
        <span class="aduc-htl-time">4–6 months</span>
        <p class="aduc-htl-desc">Custom architectural plans, structural engineering, and Title 24 energy calculations — all included.</p>
      </div>
      <div class="aduc-htl-step" data-step="1">
        <div class="aduc-htl-node"></div>
        <span class="aduc-htl-number">02</span>
        <h3 class="aduc-htl-title"><span class="word">Permits</span></h3>
        <span class="aduc-htl-time">Included in design</span>
        <p class="aduc-htl-desc">We submit to your city and manage all plan-check corrections and approvals.</p>
      </div>
      <div class="aduc-htl-step" data-step="2">
        <div class="aduc-htl-node"></div>
        <span class="aduc-htl-number">03</span>
        <h3 class="aduc-htl-title"><span class="word">Build</span></h3>
        <span class="aduc-htl-time">6–8 months</span>
        <p class="aduc-htl-desc">Licensed crew, weekly progress updates, and on-budget delivery from foundation to final inspection.</p>
      </div>
    </div>
    <p class="aduc-htl-note">Total timeline: 10–14 months from design to move-in</p>
  </div>
</section>

<!-- ═══════════ SECTION 5: CTA ═══════════ -->
<section class="av-cta">
  <div class="aduc-cta-container">
    <div class="av-cta-bg" data-animate="parallax-depth"></div>
    <div class="av-cta-content">
      <div class="av-cta-subtitle" data-animate="fade-up">Ready to Begin?</div>
      <h2 class="av-cta-heading" data-animate="word-stagger-elastic">Start your ADU construction</h2>
      <div class="av-cta-btns">
        <a href="#" class="av-cta-btn av-cta-btn-primary" data-magnetic data-animate="fade-up">Schedule a Meeting &#8594;</a>
        <a href="#" class="av-cta-btn av-cta-btn-ghost" data-magnetic data-animate="fade-up">ADU Cost Calculator</a>
      </div>
    </div>
  </div>
</section>
</main>

<!-- ═══════════ SCRIPTS (bottom of body — correct CDN order) ═══════════ -->
<script src="https://unpkg.com/lenis@1.1.18/dist/lenis.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.149.0/build/three.min.js"></script>

<!-- ═══════════ GSAP Animations ═══════════ -->
<script>
(function () {
  'use strict';

  gsap.registerPlugin(ScrollTrigger);

  /* ═══════════════════════════════════════════════
     LENIS SMOOTH SCROLL
     ═══════════════════════════════════════════════ */
  var lenis = new Lenis({
    duration: 1.4,
    easing: function (t) { return Math.min(1, 1.001 - Math.pow(2, -10 * t)); },
    smooth: true,
    smoothTouch: false,
  });
  lenis.on('scroll', ScrollTrigger.update);
  gsap.ticker.add(function (time) { lenis.raf(time * 1000); });
  gsap.ticker.lagSmoothing(0);
  ScrollTrigger.addEventListener('refresh', function () { lenis.resize(); });

  /* ═══════════════════════════════════════════════
     UTILITY — TEXT SPLITTING
     ═══════════════════════════════════════════════ */
  function splitIntoWords(el) {
    var text = el.textContent.trim();
    var align = window.getComputedStyle(el).textAlign;
    el.innerHTML = '';
    el.style.display = 'flex';
    el.style.flexWrap = 'wrap';
    el.style.gap = '0 0.3em';
    if (align === 'center') el.style.justifyContent = 'center';
    var wordEls = [];
    text.split(/\s+/).forEach(function (word) {
      var wrapper = document.createElement('span');
      wrapper.style.display = 'inline-block';
      wrapper.style.overflow = 'hidden';
      wrapper.style.verticalAlign = 'top';
      var inner = document.createElement('span');
      inner.style.display = 'inline-block';
      inner.textContent = word;
      wrapper.appendChild(inner);
      el.appendChild(wrapper);
      wordEls.push(inner);
    });
    return wordEls;
  }

  function splitIntoChars(el) {
    var text = el.textContent.trim();
    el.innerHTML = '';
    el.style.display = 'flex';
    el.style.flexWrap = 'wrap';
    el.style.gap = '0 0.3em';
    var charEls = [];
    text.split(/\s+/).forEach(function (word) {
      var wordWrap = document.createElement('span');
      wordWrap.style.display = 'inline-flex';
      wordWrap.style.overflow = 'hidden';
      for (var i = 0; i < word.length; i++) {
        var charSpan = document.createElement('span');
        charSpan.style.display = 'inline-block';
        charSpan.textContent = word[i];
        wordWrap.appendChild(charSpan);
        charEls.push(charSpan);
      }
      el.appendChild(wordWrap);
    });
    return charEls;
  }

  /* ═══════════════════════════════════════════════
     HERO — Char Cascade + Gold Line
     ═══════════════════════════════════════════════ */
  function initHero() {
    var hero = document.getElementById('aduc-hero');
    if (!hero) return;

    var h1 = hero.querySelector('h1');
    var goldLine = hero.querySelector('.aduc-hero-gold-line');
    var subtitle = hero.querySelector('.aduc-hero-subtitle');
    var label = hero.querySelector('.aduc-hero-label');

    if (label) {
      label.removeAttribute('data-animate');
      gsap.fromTo(label,
        { opacity: 0, y: 20 },
        { opacity: 0.45, y: 0, duration: 0.8, delay: 0.2, ease: 'power3.out' }
      );
    }

    if (h1) {
      h1.removeAttribute('data-animate');
      var chars = splitIntoChars(h1);
      gsap.set(chars, { yPercent: 120, opacity: 0, rotateX: -90, filter: 'blur(8px)' });
      gsap.to(chars, {
        yPercent: 0, opacity: 1, rotateX: 0, filter: 'blur(0px)',
        duration: 1.2, stagger: 0.025, ease: 'elastic.out(1, 0.6)', delay: 0.4,
      });
    }

    if (goldLine) {
      gsap.to(goldLine, { width: '80px', duration: 1, delay: 1, ease: 'power3.inOut' });
    }

    if (subtitle) {
      subtitle.removeAttribute('data-animate');
      gsap.fromTo(subtitle,
        { opacity: 0, y: 20, filter: 'blur(4px)' },
        { opacity: 0.55, y: 0, filter: 'blur(0px)', duration: 1, delay: 1.2, ease: 'power3.out' }
      );
    }

    var heroContent = hero.querySelector('.aduc-hero-content');
    if (heroContent) {
      gsap.to(heroContent, {
        opacity: 0, y: -40, filter: 'blur(6px)', ease: 'none',
        scrollTrigger: { trigger: hero, start: 'top top', end: 'bottom top', scrub: 1 },
      });
    }

    var hint = hero.querySelector('.aduc-hero-scroll-hint');
    if (hint) {
      hint.removeAttribute('data-animate');
      gsap.fromTo(hint, { opacity: 0 }, { opacity: 0.3, duration: 1, delay: 2, ease: 'power2.out' });
      gsap.to(hint, {
        opacity: 0, ease: 'none',
        scrollTrigger: { trigger: hero, start: 'top top', end: '30% top', scrub: 1 },
      });
    }
  }

  /* ═══════════════════════════════════════════════
     TYPES — Scroll-Locked Card Showcase
     ═══════════════════════════════════════════════ */
  function initTypesShowcase() {
    var cards = document.querySelectorAll('.aduc-type-card');
    var dots = document.querySelectorAll('.aduc-tdot');
    var fill = document.querySelector('.aduc-types-fill');
    var typesEl = document.getElementById('aduc-types');
    if (!typesEl || !cards.length) return;

    var lastStep = 0;

    function setTypeStep(step) {
      if (step === lastStep) return;
      cards.forEach(function (card, i) {
        gsap.to(card, {
          opacity: i === step ? 1 : 0,
          y: i === step ? '-50%' : (i < step ? '-80%' : '-20%'),
          duration: 0.5, ease: 'power2.out', overwrite: true,
        });
      });
      dots.forEach(function (d, i) { d.classList.toggle('active', i <= step); });
      if (fill) fill.style.width = (step / 3 * 100) + '%';
      typesEl.dispatchEvent(new CustomEvent('type-change', { detail: { step: step } }));
      lastStep = step;
    }

    ScrollTrigger.create({
      trigger: '#aduc-types',
      start: 'top top',
      end: '+=' + (window.innerHeight * 4),
      pin: true,
      scrub: 0.6,
      onUpdate: function (self) {
        var p = self.progress;
        var step = Math.min(Math.floor(p * 4), 3);
        setTypeStep(step);
      },
    });
  }

  /* ═══════════════════════════════════════════════
     ROI / COST — Stat Cards with Scramble
     ═══════════════════════════════════════════════ */
  function initROI() {
    var roiCards = document.querySelectorAll('.aduc-roi-card');
    if (!roiCards.length) return;

    ScrollTrigger.create({
      trigger: '.aduc-roi-grid', start: 'top 75%', once: true,
      onEnter: function () {
        roiCards.forEach(function (card, i) {
          gsap.to(card, {
            opacity: 1, y: 0, duration: 0.8,
            delay: i * 0.15, ease: 'power3.out',
          });

          /* Scramble effect on values */
          var valEl = card.querySelector('.aduc-roi-value');
          var finalText = valEl.getAttribute('data-count');
          var chars = '0123456789$%K+.--yrs ';
          var scrambleLen = finalText.length;
          var step = { t: 0 };

          gsap.to(step, {
            t: 1, duration: 1.2, delay: 0.3 + i * 0.15,
            ease: 'power2.inOut',
            onUpdate: function () {
              var progress = step.t;
              var revealed = Math.floor(progress * scrambleLen);
              var result = '';
              for (var c = 0; c < scrambleLen; c++) {
                if (c < revealed) {
                  result += finalText[c];
                } else {
                  result += chars[Math.floor(Math.random() * chars.length)];
                }
              }
              valEl.textContent = result;
            },
            onComplete: function () {
              valEl.textContent = finalText;
            },
          });
        });
      },
    });
  }

  /* ═══════════════════════════════════════════════
     PROCESS — Horizontal Timeline Draw
     ═══════════════════════════════════════════════ */
  function initTimeline() {
    var htlFill = document.getElementById('aduc-htl-fill');
    var htlSteps = document.querySelectorAll('.aduc-htl-step');
    if (!htlSteps.length) return;

    var htlActivated = [false, false, false];

    ScrollTrigger.create({
      trigger: '#aduc-htl-wrap', start: 'top 70%', end: 'bottom 50%', scrub: 0.5,
      onUpdate: function (self) {
        var p = self.progress;
        if (htlFill) htlFill.style.width = (p * 100) + '%';

        htlSteps.forEach(function (step, i) {
          var threshold = i / htlSteps.length;
          var node = step.querySelector('.aduc-htl-node');

          if (p >= threshold + 0.05 && !htlActivated[i]) {
            htlActivated[i] = true;
            node.classList.add('active');

            gsap.to(step.querySelectorAll('.aduc-htl-title .word'), {
              opacity: 1, y: 0, duration: 0.8, stagger: 0.04, ease: 'power3.out',
            });
            gsap.to(step.querySelector('.aduc-htl-time'), {
              opacity: 1, duration: 0.6, delay: 0.2, ease: 'power2.out',
            });
            gsap.to(step.querySelector('.aduc-htl-desc'), {
              opacity: 0.6, filter: 'blur(0px)', y: 0, duration: 0.8, delay: 0.3, ease: 'power2.out',
            });
          }
        });
      },
    });
  }

  /* ═══════════════════════════════════════════════
     SCROLL ANIMATIONS — data-animate handlers
     ═══════════════════════════════════════════════ */
  function initScrollAnimations() {

    /* fade-up */
    document.querySelectorAll('[data-animate="fade-up"]').forEach(function (el) {
      gsap.fromTo(el,
        { y: 50, opacity: 0, filter: 'blur(4px)' },
        { y: 0, opacity: 1, filter: 'blur(0px)', duration: 1.2, ease: 'power3.out',
          scrollTrigger: { trigger: el, start: 'top 88%', toggleActions: 'play none none reverse' } }
      );
    });

    /* word-stagger-elastic */
    document.querySelectorAll('[data-animate="word-stagger-elastic"]').forEach(function (el) {
      var words = splitIntoWords(el);
      gsap.set(words, { yPercent: 120 });
      gsap.to(words, {
        yPercent: 0, duration: 1.4, stagger: 0.06, ease: 'elastic.out(1, 0.4)',
        scrollTrigger: { trigger: el, start: 'top 82%' },
      });
    });

    /* parallax-depth */
    document.querySelectorAll('[data-animate="parallax-depth"]').forEach(function (el) {
      gsap.to(el, {
        yPercent: -15, ease: 'none',
        scrollTrigger: { trigger: el.closest('section') || el.parentElement,
          start: 'top bottom', end: 'bottom top', scrub: 1 },
      });
    });

    /* line-wipe */
    document.querySelectorAll('[data-animate="line-wipe"]').forEach(function (el) {
      var lineEls = el.querySelectorAll('.line');
      if (!lineEls.length) {
        var html = el.innerHTML;
        var texts;
        if (/<br\s*\/?>/i.test(html)) {
          texts = html.split(/<br\s*\/?>/i).map(function (s) {
            return s.replace(/<[^>]*>/g, '').trim();
          }).filter(Boolean);
        } else {
          texts = [el.textContent.trim()];
        }
        el.innerHTML = '';
        texts.forEach(function (t) {
          var d = document.createElement('div');
          d.className = 'line';
          d.textContent = t;
          el.appendChild(d);
        });
        lineEls = el.querySelectorAll('.line');
      }
      lineEls.forEach(function (line, i) {
        gsap.set(line, { clipPath: 'inset(0 100% 0 0)' });
        gsap.to(line, {
          clipPath: 'inset(0 0% 0 0)', ease: 'power3.inOut',
          scrollTrigger: {
            trigger: el,
            start: 'top ' + (85 - i * 12) + '%',
            end: 'top ' + (65 - i * 12) + '%',
            scrub: 1,
          },
        });
      });
    });

    /* Label line expand */
    document.querySelectorAll('.av-label-line').forEach(function (line) {
      gsap.fromTo(line,
        { scaleX: 0 },
        { scaleX: 1, duration: 1.2, ease: 'power3.inOut',
          scrollTrigger: { trigger: line.parentElement, start: 'top 85%' } }
      );
    });

    /* Magnetic buttons (desktop) */
    if (window.innerWidth >= 992) {
      document.querySelectorAll('[data-magnetic]').forEach(function (btn) {
        btn.addEventListener('mousemove', function (e) {
          var r = btn.getBoundingClientRect();
          var x = (e.clientX - r.left - r.width / 2) * 0.15;
          var y = (e.clientY - r.top - r.height / 2) * 0.15;
          gsap.to(btn, { x: x, y: y, duration: 0.3, ease: 'power2.out' });
        });
        btn.addEventListener('mouseleave', function () {
          gsap.to(btn, { x: 0, y: 0, duration: 0.5, ease: 'elastic.out(1, 0.4)' });
        });
      });
    }

    requestAnimationFrame(function () {
      requestAnimationFrame(function () { ScrollTrigger.refresh(); });
    });
    if (document.readyState !== 'complete') {
      window.addEventListener('load', function () { ScrollTrigger.refresh(); });
    }
  }

  /* ═══════════════════════════════════════════════
     CTA AMBIENT GLOW
     ═══════════════════════════════════════════════ */
  function initCTAGlow() {
    var ctaSection = document.querySelector('.aduc-cta-container');
    if (!ctaSection) return;

    var glow = document.createElement('div');
    glow.style.cssText = [
      'position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);',
      'width:140%;height:140%;border-radius:50%;pointer-events:none;z-index:0;',
      'background:radial-gradient(ellipse at center, rgba(200,34,42,0.06) 0%, transparent 60%);',
      'opacity:0;',
    ].join('');
    ctaSection.style.position = 'relative';
    ctaSection.insertBefore(glow, ctaSection.firstChild);

    ScrollTrigger.create({
      trigger: ctaSection,
      start: 'top 80%',
      onEnter: function () {
        gsap.to(glow, {
          opacity: 1, duration: 1.5, ease: 'power2.out',
          onComplete: function () {
            gsap.to(glow, { opacity: 0.4, duration: 3, yoyo: true, repeat: -1, ease: 'sine.inOut' });
          },
        });
      },
      onLeaveBack: function () {
        gsap.to(glow, { opacity: 0, duration: 0.5, overwrite: true });
      },
    });
  }

  /* ═══════════════════════════════════════════════
     INIT
     ═══════════════════════════════════════════════ */
  window.addEventListener('DOMContentLoaded', function () {
    initHero();
    initTypesShowcase();
    initROI();
    initTimeline();
    initScrollAnimations();
    initCTAGlow();
  });
})();
</script>

<!-- ═══════════ Three.js: Hero — Construction Site with Tower Crane ═══════════ -->
<script>
(function () {
  'use strict';

  if (window.innerWidth < 992 || typeof THREE === 'undefined') return;

  var wrap = document.getElementById('hero-canvas');
  if (!wrap) return;

  /* ── Setup ── */
  var scene = new THREE.Scene();
  var camera = new THREE.PerspectiveCamera(50, wrap.clientWidth / wrap.clientHeight, 0.1, 1000);
  camera.position.set(18, 14, 24);
  camera.lookAt(0, 3, 0);

  var renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
  renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
  renderer.setSize(wrap.clientWidth, wrap.clientHeight);
  renderer.setClearColor(0x000000, 0);
  wrap.appendChild(renderer.domElement);

  /* ── Lights ── */
  scene.add(new THREE.AmbientLight(0xf0ede8, 0.3));
  var pl1 = new THREE.PointLight(0xc9a96e, 0.8, 80);
  pl1.position.set(18, 22, 22);
  scene.add(pl1);
  var pl2 = new THREE.PointLight(0xc8222a, 0.2, 60);
  pl2.position.set(-18, 6, 12);
  scene.add(pl2);

  /* ── Colors / Materials ── */
  var GOLD = 0xc9a96e, CREAM = 0xf0ede8, SLATE = 0x555555;

  function makeMat(c) { return new THREE.LineBasicMaterial({ color: c, transparent: true, opacity: 0 }); }
  var gridMat = makeMat(CREAM);
  var foundMat = makeMat(GOLD);
  var structMat = makeMat(SLATE);
  var craneMat = makeMat(GOLD);
  var scaffMat = makeMat(SLATE);

  /* ── Geometry Helpers ── */
  function wireBox(w, h, d, mat) {
    return new THREE.LineSegments(new THREE.EdgesGeometry(new THREE.BoxGeometry(w, h, d)), mat);
  }
  function lineSegs(pts, mat) {
    var g = new THREE.BufferGeometry();
    g.setAttribute('position', new THREE.Float32BufferAttribute(pts, 3));
    return new THREE.LineSegments(g, mat);
  }
  function linePath(pts, mat) {
    var g = new THREE.BufferGeometry();
    g.setAttribute('position', new THREE.Float32BufferAttribute(pts, 3));
    return new THREE.Line(g, mat);
  }

  var sg = new THREE.Group();
  scene.add(sg);

  /* ═══════════════════════════════════════════════
     GROUP 1 — Blueprint Grid
     ═══════════════════════════════════════════════ */
  var gGrid = new THREE.Group(), gp = [], i;
  for (i = -10; i <= 10; i += 2) { gp.push(i, 0, -8, i, 0, 8); }
  for (i = -8; i <= 8; i += 2) { gp.push(-10, 0, i, 10, 0, i); }
  gGrid.add(lineSegs(gp, gridMat));
  sg.add(gGrid);

  /* ═══════════════════════════════════════════════
     GROUP 2 — Foundation / Footprint
     ═══════════════════════════════════════════════ */
  var gFound = new THREE.Group();
  var mainFoot = wireBox(9, 0.15, 7, foundMat);
  mainFoot.position.set(0, 0.075, 0);
  gFound.add(mainFoot);
  /* Foundation trenches */
  gFound.add(lineSegs([
    -4.5, 0.08, -3.5, 4.5, 0.08, -3.5,
    -4.5, 0.08, 3.5, 4.5, 0.08, 3.5,
    -4.5, 0.08, -3.5, -4.5, 0.08, 3.5,
    4.5, 0.08, -3.5, 4.5, 0.08, 3.5,
    0, 0.08, -3.5, 0, 0.08, 3.5,
    -4.5, 0.08, 0, 4.5, 0.08, 0,
  ], foundMat));
  /* Rebar dots */
  gFound.add(lineSegs([
    -3, 0.1, -3.5, -3, 0.3, -3.5,
    -1.5, 0.1, -3.5, -1.5, 0.3, -3.5,
    1.5, 0.1, -3.5, 1.5, 0.3, -3.5,
    3, 0.1, -3.5, 3, 0.3, -3.5,
    -3, 0.1, 3.5, -3, 0.3, 3.5,
    -1.5, 0.1, 3.5, -1.5, 0.3, 3.5,
    1.5, 0.1, 3.5, 1.5, 0.3, 3.5,
    3, 0.1, 3.5, 3, 0.3, 3.5,
  ], foundMat));
  sg.add(gFound);

  /* ═══════════════════════════════════════════════
     GROUP 3 — Structure (walls + partial build)
     ═══════════════════════════════════════════════ */
  var gStruct = new THREE.Group();
  var mainVol = wireBox(9, 6, 7, structMat);
  mainVol.position.set(0, 3, 0);
  gStruct.add(mainVol);
  /* Interior wall dividers */
  gStruct.add(lineSegs([
    0, 0, -3.5, 0, 6, -3.5,
    0, 0, 3.5, 0, 6, 3.5,
    -2.5, 0, 0, -2.5, 6, 0,
    2, 0, 0, 2, 6, 0,
    -4.5, 0, -1.5, -4.5, 6, -1.5,
  ], structMat));
  /* Window openings — front face */
  gStruct.add(lineSegs([
    -3.5, 2, -3.51, -1.5, 2, -3.51,
    -1.5, 2, -3.51, -1.5, 4.5, -3.51,
    -1.5, 4.5, -3.51, -3.5, 4.5, -3.51,
    -3.5, 4.5, -3.51, -3.5, 2, -3.51,
    1, 2, -3.51, 3.5, 2, -3.51,
    3.5, 2, -3.51, 3.5, 4.5, -3.51,
    3.5, 4.5, -3.51, 1, 4.5, -3.51,
    1, 4.5, -3.51, 1, 2, -3.51,
  ], structMat));
  /* Window openings — back face */
  gStruct.add(lineSegs([
    -3, 2, 3.51, -1, 2, 3.51,
    -1, 2, 3.51, -1, 4, 3.51,
    -1, 4, 3.51, -3, 4, 3.51,
    -3, 4, 3.51, -3, 2, 3.51,
    1.5, 2, 3.51, 3.5, 2, 3.51,
    3.5, 2, 3.51, 3.5, 4, 3.51,
    3.5, 4, 3.51, 1.5, 4, 3.51,
    1.5, 4, 3.51, 1.5, 2, 3.51,
  ], structMat));
  /* Side windows */
  gStruct.add(lineSegs([
    -4.51, 2.5, -1.5, -4.51, 2.5, 0.5,
    -4.51, 2.5, 0.5, -4.51, 4.5, 0.5,
    -4.51, 4.5, 0.5, -4.51, 4.5, -1.5,
    -4.51, 4.5, -1.5, -4.51, 2.5, -1.5,
  ], structMat));
  /* Door opening */
  gStruct.add(lineSegs([
    -0.7, 0, -3.51, 0.7, 0, -3.51,
    0.7, 0, -3.51, 0.7, 4.8, -3.51,
    0.7, 4.8, -3.51, -0.7, 4.8, -3.51,
    -0.7, 4.8, -3.51, -0.7, 0, -3.51,
  ], structMat));
  /* Roof overhang */
  gStruct.add(lineSegs([
    -5, 6.1, -4, 5, 6.1, -4,
    5, 6.1, -4, 5, 6.1, 4,
    5, 6.1, 4, -5, 6.1, 4,
    -5, 6.1, 4, -5, 6.1, -4,
  ], structMat));
  /* Partial roof framing — ridge + rafters */
  gStruct.add(lineSegs([
    -5, 7.5, 0, 5, 7.5, 0,
    -5, 6, -4, -5, 7.5, 0,
    -5, 7.5, 0, -5, 6, 4,
    5, 6, -4, 5, 7.5, 0,
    5, 7.5, 0, 5, 6, 4,
    -2, 6, -4, -2, 7.5, 0,
    -2, 7.5, 0, -2, 6, 4,
    2, 6, -4, 2, 7.5, 0,
    2, 7.5, 0, 2, 6, 4,
  ], structMat));
  sg.add(gStruct);

  /* ═══════════════════════════════════════════════
     GROUP 4 — Tower Crane (detailed lattice)
     ═══════════════════════════════════════════════ */
  var gCrane = new THREE.Group();
  /* Mast — dual vertical rails (front face) */
  gCrane.add(lineSegs([
    -7.4, 0, -5.5, -7.4, 17, -5.5,
    -6.6, 0, -5.5, -6.6, 17, -5.5,
    -7.4, 0, -5.5, -6.6, 0, -5.5,
    -7.4, 17, -5.5, -6.6, 17, -5.5,
  ], craneMat));
  /* Mast depth rails (side face) */
  gCrane.add(lineSegs([
    -7.4, 0, -4.7, -7.4, 17, -4.7,
    -6.6, 0, -4.7, -6.6, 17, -4.7,
    -7.4, 0, -4.7, -6.6, 0, -4.7,
    -7.4, 17, -4.7, -6.6, 17, -4.7,
  ], craneMat));
  /* Mast connecting horizontals */
  gCrane.add(lineSegs([
    -7.4, 0, -5.5, -7.4, 0, -4.7,
    -6.6, 0, -5.5, -6.6, 0, -4.7,
    -7.4, 17, -5.5, -7.4, 17, -4.7,
    -6.6, 17, -5.5, -6.6, 17, -4.7,
  ], craneMat));
  /* Lattice X-bracing on mast (front face) */
  for (i = 0; i < 17; i += 3) {
    var yEnd = Math.min(i + 3, 17);
    gCrane.add(lineSegs([
      -7.4, i, -5.5, -6.6, yEnd, -5.5,
      -6.6, i, -5.5, -7.4, yEnd, -5.5,
    ], craneMat));
  }
  /* Lattice X-bracing on mast (side face) */
  for (i = 0; i < 17; i += 3) {
    var yEnd2 = Math.min(i + 3, 17);
    gCrane.add(lineSegs([
      -7.4, i, -5.5, -7.4, yEnd2, -4.7,
      -7.4, i, -4.7, -7.4, yEnd2, -5.5,
    ], craneMat));
  }
  /* Horizontal shelves every 3 units */
  for (i = 3; i <= 15; i += 3) {
    gCrane.add(lineSegs([
      -7.4, i, -5.5, -6.6, i, -5.5,
      -7.4, i, -4.7, -6.6, i, -4.7,
      -7.4, i, -5.5, -7.4, i, -4.7,
      -6.6, i, -5.5, -6.6, i, -4.7,
    ], craneMat));
  }
  /* Peak (top of mast) */
  gCrane.add(lineSegs([-7, 17, -5.1, -7, 18, -5.1], craneMat));
  /* Jib (horizontal arm — right) */
  gCrane.add(lineSegs([
    -7, 16.5, -5.1, 7, 16.5, -5.1,
    -7, 17, -5.1, 7, 17, -5.1,
    7, 16.5, -5.1, 7, 17, -5.1,
  ], craneMat));
  /* Jib lattice bracing */
  for (i = -7; i < 7; i += 2.8) {
    gCrane.add(lineSegs([
      i, 16.5, -5.1, i + 2.8, 17, -5.1,
      i + 2.8, 16.5, -5.1, i, 17, -5.1,
    ], craneMat));
  }
  /* Counter-jib (left) */
  gCrane.add(lineSegs([
    -7, 16.5, -5.1, -12, 16.5, -5.1,
    -7, 17, -5.1, -12, 17, -5.1,
    -12, 16.5, -5.1, -12, 17, -5.1,
  ], craneMat));
  /* Tie lines from peak to jib ends */
  gCrane.add(lineSegs([
    -7, 18, -5.1, 7, 17, -5.1,
    -7, 18, -5.1, -12, 17, -5.1,
  ], craneMat));
  /* Hanging cable from jib */
  gCrane.add(lineSegs([2.5, 16.5, -5.1, 2.5, 10, -5.1], craneMat));
  /* Hook (curved path) */
  gCrane.add(linePath([
    2.5, 10, -5.1, 2.5, 9.4, -5.1,
    2.2, 9.0, -5.1, 2.8, 9.0, -5.1,
  ], craneMat));
  /* Counter-weight block */
  var cwBlock = wireBox(1.5, 1, 0.8, craneMat);
  cwBlock.position.set(-11, 16, -5.1);
  gCrane.add(cwBlock);
  /* Crane base / pedestal */
  var craneBase = wireBox(2, 0.5, 2, craneMat);
  craneBase.position.set(-7, 0.25, -5.1);
  gCrane.add(craneBase);
  sg.add(gCrane);

  /* ═══════════════════════════════════════════════
     GROUP 5 — Scaffolding
     ═══════════════════════════════════════════════ */
  var gScaff = new THREE.Group();
  /* Vertical poles — front face */
  gScaff.add(lineSegs([
    -5.5, 0, -4.2, -5.5, 7, -4.2,
    5.5, 0, -4.2, 5.5, 7, -4.2,
    0, 0, -4.2, 0, 7, -4.2,
  ], scaffMat));
  /* Vertical poles — back face */
  gScaff.add(lineSegs([
    -5.5, 0, 4.2, -5.5, 7, 4.2,
    5.5, 0, 4.2, 5.5, 7, 4.2,
  ], scaffMat));
  /* Vertical poles — sides (bottom) */
  gScaff.add(lineSegs([
    -5.5, 0, -4.2, -5.5, 0, 4.2,
    5.5, 0, -4.2, 5.5, 0, 4.2,
  ], scaffMat));
  /* Horizontal crossbars at multiple levels — front */
  var levels = [2.3, 4.6, 7];
  for (i = 0; i < levels.length; i++) {
    var y = levels[i];
    gScaff.add(lineSegs([
      -5.5, y, -4.2, 0, y, -4.2,
      0, y, -4.2, 5.5, y, -4.2,
    ], scaffMat));
  }
  /* Horizontal crossbars — back */
  for (i = 0; i < levels.length; i++) {
    gScaff.add(lineSegs([-5.5, levels[i], 4.2, 5.5, levels[i], 4.2], scaffMat));
  }
  /* Horizontal crossbars — left side */
  for (i = 0; i < levels.length; i++) {
    gScaff.add(lineSegs([-5.5, levels[i], -4.2, -5.5, levels[i], 4.2], scaffMat));
  }
  /* Horizontal crossbars — right side */
  for (i = 0; i < levels.length; i++) {
    gScaff.add(lineSegs([5.5, levels[i], -4.2, 5.5, levels[i], 4.2], scaffMat));
  }
  /* X-bracing on front scaffolding */
  gScaff.add(lineSegs([
    -5.5, 0, -4.2, 0, 2.3, -4.2,
    0, 0, -4.2, -5.5, 2.3, -4.2,
    0, 0, -4.2, 5.5, 2.3, -4.2,
    5.5, 0, -4.2, 0, 2.3, -4.2,
    -5.5, 2.3, -4.2, 0, 4.6, -4.2,
    0, 2.3, -4.2, -5.5, 4.6, -4.2,
    0, 2.3, -4.2, 5.5, 4.6, -4.2,
    5.5, 2.3, -4.2, 0, 4.6, -4.2,
  ], scaffMat));
  /* Plank walkways */
  gScaff.add(lineSegs([
    -5.3, 2.3, -4.2, -5.3, 2.3, -3.8,
    -5.3, 2.3, -3.8, 5.3, 2.3, -3.8,
    5.3, 2.3, -3.8, 5.3, 2.3, -4.2,
    -5.3, 4.6, -4.2, -5.3, 4.6, -3.8,
    -5.3, 4.6, -3.8, 5.3, 4.6, -3.8,
    5.3, 4.6, -3.8, 5.3, 4.6, -4.2,
  ], scaffMat));
  sg.add(gScaff);

  /* ═══════════════════════════════════════════════
     PARTICLES — 60 rising gold motes
     ═══════════════════════════════════════════════ */
  var PC = 60;
  var pArr = new Float32Array(PC * 3);
  var pVel = [];
  for (i = 0; i < PC; i++) {
    pArr[i * 3]     = (Math.random() - 0.5) * 24;
    pArr[i * 3 + 1] = Math.random() * 16;
    pArr[i * 3 + 2] = (Math.random() - 0.5) * 20;
    pVel.push(0.003 + Math.random() * 0.007);
  }
  var pGeo = new THREE.BufferGeometry();
  pGeo.setAttribute('position', new THREE.Float32BufferAttribute(pArr, 3));
  var pMat = new THREE.PointsMaterial({
    color: GOLD, size: 0.1, transparent: true, opacity: 0, sizeAttenuation: true,
  });
  sg.add(new THREE.Points(pGeo, pMat));

  /* ═══════════════════════════════════════════════
     SCROLL PROGRESS + MOUSE PARALLAX
     ═══════════════════════════════════════════════ */
  var mx = 0, my = 0;
  document.addEventListener('mousemove', function (e) {
    mx = (e.clientX / window.innerWidth  - 0.5) * 2;
    my = (e.clientY / window.innerHeight - 0.5) * 2;
  });

  var scrollP = 0;
  ScrollTrigger.create({
    trigger: '#aduc-hero', start: 'top top', end: 'bottom top',
    onUpdate: function (s) { scrollP = s.progress; },
  });

  /* ── Visibility gate ── */
  var visible = true;
  new IntersectionObserver(
    function (e) { visible = e[0].isIntersecting; },
    { threshold: 0.01 }
  ).observe(wrap);

  /* ═══════════════════════════════════════════════
     RENDER LOOP — timed reveal + scroll orbit
     ═══════════════════════════════════════════════ */
  var clock = new THREE.Clock();
  var baseRotY = -0.3;

  function clamp(v) { return v < 0 ? 0 : v > 1 ? 1 : v; }
  function ease(t) { return 1 - Math.pow(1 - t, 3); }

  function animate() {
    requestAnimationFrame(animate);
    if (!visible) return;

    var t = clock.getElapsedTime();

    /* Progressive timed reveal (cubic ease-out) */
    /* Grid: 0s -> 0.8s */
    gridMat.opacity = clamp(t / 0.8) * 0.15;

    /* Foundation: 0.4s -> 1.2s */
    var fv = ease(clamp((t - 0.4) / 0.8));
    foundMat.opacity = fv * 0.55;
    gFound.position.y = -1.5 * (1 - fv);

    /* Structure: 1.0s -> 2.0s */
    var sv = ease(clamp((t - 1.0) / 1.0));
    structMat.opacity = sv * 0.4;
    gStruct.position.y = -5 * (1 - sv);

    /* Crane: 1.6s -> 2.8s */
    var cv = ease(clamp((t - 1.6) / 1.2));
    craneMat.opacity = cv * 0.5;
    gCrane.position.y = -12 * (1 - cv);

    /* Scaffolding: 2.2s -> 3.2s */
    var scv = ease(clamp((t - 2.2) / 1.0));
    scaffMat.opacity = scv * 0.3;
    gScaff.position.y = -3 * (1 - scv);

    /* Particles: 2.8s -> 3.8s */
    pMat.opacity = clamp((t - 2.8) / 1.0) * 0.4;

    /* Camera orbit: slow auto-rotate + scroll + mouse parallax */
    var targetY = baseRotY + t * 0.03 + scrollP * 0.5;
    sg.rotation.y += (targetY + mx * 0.12 - sg.rotation.y) * 0.015;
    sg.rotation.x += (my * 0.04 - sg.rotation.x) * 0.015;

    /* Subtle breathing */
    var breathe = 1 + Math.sin(t * 0.4) * 0.008;
    sg.scale.setScalar(breathe);

    /* Camera follows scroll */
    camera.position.y = 14 - scrollP * 6;
    camera.lookAt(0, 3, 0);

    /* Animate particles upward */
    var pa = pGeo.attributes.position.array;
    for (var j = 0; j < PC; j++) {
      pa[j * 3 + 1] += pVel[j];
      if (pa[j * 3 + 1] > 18) {
        pa[j * 3 + 1] = -1;
        pa[j * 3]     = (Math.random() - 0.5) * 24;
        pa[j * 3 + 2] = (Math.random() - 0.5) * 20;
      }
    }
    pGeo.attributes.position.needsUpdate = true;

    /* Lights */
    pl1.position.x = 18 + Math.sin(t * 0.25) * 3;
    pl1.position.z = 22 + Math.cos(t * 0.18) * 3;

    renderer.render(scene, camera);
  }

  animate();

  /* ── Debounced Resize ── */
  var resizeTimer;
  window.addEventListener('resize', function () {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(function () {
      if (window.innerWidth < 992) { renderer.domElement.style.display = 'none'; return; }
      renderer.domElement.style.display = '';
      var w = wrap.clientWidth, h = wrap.clientHeight;
      camera.aspect = w / h;
      camera.updateProjectionMatrix();
      renderer.setSize(w, h);
    }, 150);
  });
})();
</script>

<!-- ═══════════ Three.js: ADU Types — Morphing wireframe buildings ═══════════ -->
<script>
(function () {
  'use strict';

  if (window.innerWidth < 992 || typeof THREE === 'undefined') return;

  var wrap = document.getElementById('types-canvas');
  if (!wrap) return;

  /* ── Setup ── */
  var scene = new THREE.Scene();
  var camera = new THREE.PerspectiveCamera(50, wrap.clientWidth / wrap.clientHeight, 0.1, 1000);
  camera.position.set(20, 16, 28);
  camera.lookAt(0, 2, 0);

  var renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
  renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
  renderer.setSize(wrap.clientWidth, wrap.clientHeight);
  renderer.setClearColor(0x000000, 0);
  wrap.appendChild(renderer.domElement);

  /* ── Lights ── */
  scene.add(new THREE.AmbientLight(0xf0ede8, 0.3));
  var pl1 = new THREE.PointLight(0xc9a96e, 0.8, 80);
  pl1.position.set(18, 22, 22);
  scene.add(pl1);

  /* ── Materials ── */
  var GOLD = 0xc9a96e, DARK = 0x222222, LIGHT_GRAY = 0xbbbbbb;
  var gridMat = new THREE.LineBasicMaterial({ color: LIGHT_GRAY, transparent: true, opacity: 0.15 });
  var buildMat = new THREE.LineBasicMaterial({ color: DARK, transparent: true, opacity: 0.35 });
  var accentMat = new THREE.LineBasicMaterial({ color: GOLD, transparent: true, opacity: 0.4 });

  var sceneGroup = new THREE.Group();
  scene.add(sceneGroup);

  function lineSegs(pts, mat) {
    var g = new THREE.BufferGeometry();
    g.setAttribute('position', new THREE.Float32BufferAttribute(pts, 3));
    return new THREE.LineSegments(g, mat);
  }

  /* Ground Grid */
  var gp = [], i;
  for (i = -10; i <= 10; i += 2) { gp.push(i, 0, -8, i, 0, 8); }
  for (i = -8; i <= 8; i += 2) { gp.push(-10, 0, i, 10, 0, i); }
  sceneGroup.add(lineSegs(gp, gridMat));

  /* ═══════════════════════════════════════════════
     MORPH INFRASTRUCTURE — 120 segments, 720 floats
     ═══════════════════════════════════════════════ */
  var SEG = 120, FC = SEG * 6;

  function pad(a) {
    var r = new Float32Array(FC);
    for (var j = 0; j < a.length && j < FC; j++) r[j] = a[j];
    return r;
  }

  function bx(cx, cy, cz, w, h, d) {
    var hw = w/2, hh = h/2, hd = d/2;
    var x0 = cx-hw, x1 = cx+hw, y0 = cy-hh, y1 = cy+hh, z0 = cz-hd, z1 = cz+hd;
    return [
      x0,y0,z0, x1,y0,z0,  x1,y0,z0, x1,y0,z1,  x1,y0,z1, x0,y0,z1,  x0,y0,z1, x0,y0,z0,
      x0,y1,z0, x1,y1,z0,  x1,y1,z0, x1,y1,z1,  x1,y1,z1, x0,y1,z1,  x0,y1,z1, x0,y1,z0,
      x0,y0,z0, x0,y1,z0,  x1,y0,z0, x1,y1,z0,  x1,y0,z1, x1,y1,z1,  x0,y0,z1, x0,y1,z1
    ];
  }

  function ws(x0, y0, z, x1, y1) {
    return [
      x0,y0,z, x1,y0,z,  x1,y0,z, x1,y1,z,
      x1,y1,z, x0,y1,z,  x0,y1,z, x0,y0,z
    ];
  }

  function wx(x, y0, z0, y1, z1) {
    return [
      x,y0,z0, x,y0,z1,  x,y0,z1, x,y1,z1,
      x,y1,z1, x,y1,z0,  x,y1,z0, x,y0,z0
    ];
  }

  function vl(x, y0, y1, z) { return [x,y0,z, x,y1,z]; }
  function hl(x0, x1, y, z) { return [x0,y,z, x1,y,z]; }

  function flat(a) {
    var r = [];
    for (var j = 0; j < a.length; j++) {
      if (Array.isArray(a[j])) {
        for (var k = 0; k < a[j].length; k++) r.push(a[j][k]);
      } else {
        r.push(a[j]);
      }
    }
    return r;
  }

  /* T0: Detached ADU — simple gable house */
  var t0 = flat([].concat(
    bx(0, 3.5, 0, 8, 7, 6),
    /* Gable roof: ridge beam front-to-back */
    [0, 8, -3, 0, 8, 3],
    /* Rafters: 4 corners up to ridge */
    [-4, 7, -3, 0, 8, -3], [4, 7, -3, 0, 8, -3],
    [-4, 7, 3, 0, 8, 3], [4, 7, 3, 0, 8, 3],
    /* Gable triangles: close the ends */
    [-4, 7, -3, 0, 8, -3], [0, 8, -3, 4, 7, -3],
    [-4, 7, 3, 0, 8, 3], [0, 8, 3, 4, 7, 3]
  ));

  /* T1: Attached ADU — main house + wing */
  var t1 = flat([].concat(
    bx(-2, 4, 0, 10, 8, 7),
    bx(6, 3, 0, 5, 6, 6),
    /* Main house gable roof */
    [-2, 8.5, -3.5, -2, 8.5, 3.5],
    [-7, 8, -3.5, -2, 8.5, -3.5], [3, 8, -3.5, -2, 8.5, -3.5],
    [-7, 8, 3.5, -2, 8.5, 3.5], [3, 8, 3.5, -2, 8.5, 3.5],
    /* Wing flat roof edge */
    [3.5, 6, -3, 8.5, 6, -3], [8.5, 6, -3, 8.5, 6, 3],
    [8.5, 6, 3, 3.5, 6, 3], [3.5, 6, 3, 3.5, 6, -3]
  ));

  /* T2: Garage Conversion — wide low box */
  var t2 = flat([].concat(
    bx(0, 2.5, 0, 10, 5, 7),
    /* Flat roof edge (slight overhang) */
    [-5.3, 5.1, -3.8, 5.3, 5.1, -3.8],
    [5.3, 5.1, -3.8, 5.3, 5.1, 3.8],
    [5.3, 5.1, 3.8, -5.3, 5.1, 3.8],
    [-5.3, 5.1, 3.8, -5.3, 5.1, -3.8],
    /* Garage door opening on front wall */
    [-2.5, 0, -3.51, -2.5, 4, -3.51],
    [2.5, 0, -3.51, 2.5, 4, -3.51],
    [-2.5, 4, -3.51, 2.5, 4, -3.51]
  ));

  /* T3: Above-Garage ADU — two-story box */
  var t3 = flat([].concat(
    bx(0, 2.5, 0, 10, 5, 7),
    bx(0, 7.5, 0, 10, 5, 7),
    /* Floor division line at y=5 */
    [-5, 5, -3.5, 5, 5, -3.5], [-5, 5, 3.5, 5, 5, 3.5],
    /* Gable roof */
    [0, 10.8, -3.5, 0, 10.8, 3.5],
    [-5, 10, -3.5, 0, 10.8, -3.5], [5, 10, -3.5, 0, 10.8, -3.5],
    [-5, 10, 3.5, 0, 10.8, 3.5], [5, 10, 3.5, 0, 10.8, 3.5]
  ));

  var morphTargets = [pad(t0), pad(t1), pad(t2), pad(t3)];

  /* Building geometry (morphable) */
  var buildPos = new Float32Array(FC), accentPos = new Float32Array(FC);
  for (i = 0; i < FC; i++) { buildPos[i] = morphTargets[0][i]; accentPos[i] = morphTargets[0][i]; }

  var buildGeo = new THREE.BufferGeometry();
  buildGeo.setAttribute('position', new THREE.Float32BufferAttribute(buildPos, 3));
  sceneGroup.add(new THREE.LineSegments(buildGeo, buildMat));

  var accentGeo = new THREE.BufferGeometry();
  accentGeo.setAttribute('position', new THREE.Float32BufferAttribute(accentPos, 3));
  sceneGroup.add(new THREE.LineSegments(accentGeo, accentMat));

  /* ═══════════════════════════════════════════════
     PARTICLES — 25 rising gold motes
     ═══════════════════════════════════════════════ */
  var PC = 25, pArr = new Float32Array(PC * 3), pVel = [];
  for (i = 0; i < PC; i++) {
    pArr[i * 3]     = (Math.random() - 0.5) * 24;
    pArr[i * 3 + 1] = Math.random() * 14;
    pArr[i * 3 + 2] = (Math.random() - 0.5) * 20;
    pVel.push(0.002 + Math.random() * 0.006);
  }
  var pGeo = new THREE.BufferGeometry();
  pGeo.setAttribute('position', new THREE.Float32BufferAttribute(pArr, 3));
  var pMat = new THREE.PointsMaterial({
    color: GOLD, size: 0.06, transparent: true, opacity: 0.15, sizeAttenuation: true,
  });
  sceneGroup.add(new THREE.Points(pGeo, pMat));

  /* ═══════════════════════════════════════════════
     MORPH STATE + SCROLL BINDING
     ═══════════════════════════════════════════════ */
  var currentTarget = 0;
  var typesEl = document.getElementById('aduc-types');
  typesEl.addEventListener('type-change', function (e) { currentTarget = e.detail.step; });

  /* ── Mouse Parallax ── */
  var mouse = { x: 0, y: 0 };
  var targetRot = { x: 0, y: 0 };
  document.addEventListener('mousemove', function (e) {
    mouse.x = (e.clientX / window.innerWidth - 0.5) * 2;
    mouse.y = (e.clientY / window.innerHeight - 0.5) * 2;
  });

  /* ── Visibility ── */
  var isVisible = false;
  new IntersectionObserver(function (e) { isVisible = e[0].isIntersecting; }, { threshold: 0.01 }).observe(typesEl);

  /* ── Render Loop ── */
  var clock = new THREE.Clock();
  var baseRot = -0.3;

  function animate() {
    requestAnimationFrame(animate);
    if (!isVisible) return;
    var t = clock.getElapsedTime();

    /* Slow orbit + mouse parallax */
    targetRot.y = baseRot + mouse.x * 0.12 + t * 0.025;
    targetRot.x = mouse.y * 0.05;
    sceneGroup.rotation.y += (targetRot.y - sceneGroup.rotation.y) * 0.015;
    sceneGroup.rotation.x += (targetRot.x - sceneGroup.rotation.x) * 0.015;

    var breathe = 1 + Math.sin(t * 0.35) * 0.006;
    sceneGroup.scale.setScalar(breathe);

    /* Morph */
    var target = morphTargets[currentTarget];
    var bArr = buildGeo.attributes.position.array;
    var aArr = accentGeo.attributes.position.array;
    var morphing = false;
    for (var j = 0; j < FC; j++) {
      var diff = target[j] - bArr[j];
      if (Math.abs(diff) > 0.01) { morphing = true; bArr[j] += diff * 0.04; aArr[j] += diff * 0.04; }
    }
    if (morphing) { buildGeo.attributes.position.needsUpdate = true; accentGeo.attributes.position.needsUpdate = true; }
    accentMat.opacity = morphing ? 0.2 : 0.5;
    buildMat.opacity = morphing ? 0.25 : 0.4;

    /* Particles */
    var pa = pGeo.attributes.position.array;
    for (var k = 0; k < PC; k++) {
      pa[k * 3 + 1] += pVel[k];
      if (pa[k * 3 + 1] > 18) {
        pa[k * 3 + 1] = -1;
        pa[k * 3]     = (Math.random() - 0.5) * 24;
        pa[k * 3 + 2] = (Math.random() - 0.5) * 20;
      }
    }
    pGeo.attributes.position.needsUpdate = true;

    /* Lights */
    pl1.position.x = 18 + Math.sin(t * 0.25) * 3;
    pl1.position.z = 22 + Math.cos(t * 0.18) * 3;

    renderer.render(scene, camera);
  }
  animate();

  /* ── Debounced Resize ── */
  var resizeTimer;
  window.addEventListener('resize', function () {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(function () {
      if (window.innerWidth < 992) { renderer.domElement.style.display = 'none'; return; }
      renderer.domElement.style.display = '';
      var w = wrap.clientWidth, h = wrap.clientHeight;
      camera.aspect = w / h;
      camera.updateProjectionMatrix();
      renderer.setSize(w, h);
    }, 150);
  });
})();
</script>

</body>
</html>
