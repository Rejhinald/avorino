<script>
window.AV=window.AV||{};
window.AV.preloader=function(lenis,done){
var pre=document.querySelector('.preloader'),cur=document.querySelector('.preloader-curtain');
gsap.set('.preloader-char',{opacity:0,y:60,rotateX:-90,filter:'blur(4px)'});
if(pre)gsap.set(pre,{display:'flex'});

if(!pre){done();if(window.AV.hero)window.AV.hero(0.3);return}
var chars=pre.querySelectorAll('.preloader-char');
lenis.stop();
var tl=gsap.timeline({onComplete:function(){pre.style.display='none';lenis.start();done()}});
tl.to(chars,{opacity:1,y:0,rotateX:0,filter:'blur(0px)',duration:1.2,stagger:.025,ease:'power4.out'},0);
tl.to({},{duration:.4});
tl.to(chars,{y:-60,opacity:0,duration:.4,stagger:.01,ease:'power3.in'});
tl.set(pre,{background:'transparent'});
if(cur)tl.to(cur,{yPercent:-100,duration:1.2,ease:'power4.inOut'});
tl.call(function(){if(window.AV.hero)window.AV.hero()},null,'-=0.8');
};
</script>
